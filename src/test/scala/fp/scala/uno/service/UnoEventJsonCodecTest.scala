package fp.scala.uno.service

import fp.scala.uno.domain.events.UnoEvent
import org.scalatest.funsuite.AnyFunSuite
import org.scalatest.matchers.should
import zio.json.*

class UnoEventJsonCodecTest extends AnyFunSuite with should.Matchers {
	import UnoEventJsonCodec.UnoEventJsonCodec

	test("UnoEventJsonCodec.decode") {
		/*val json =
			"""{"LaPartieEstPreteAJouer": {
			  |"pioche": [{"CarteNumerique": {"valeur": {"ZERO": {}}, "couleur": {"Jaune": {}}}}]
			  |, "joueurs": [
			  |            {
			  |                "nom": "Joueur 1",
			  |                "uid": "98064f99-fc82-4634-86e3-28d048be3753",
			  |                "main": [],
			  |                "placement": 1
			  |            },
			  |            {
			  |                "nom": "Joueur 2",
			  |                "uid": "98064f99-fc82-4634-86e3-28d048be3752",
			  |                "main": [],
			  |                "placement": 2
			  |            },
			  |            {
			  |                "nom": "Joueur 3",
			  |                "uid": "98064f99-fc82-4634-86e3-28d048be3759",
			  |                "main": [],
			  |                "placement": 3
			  |            }
			  |        ]
			  |}}""".stripMargin*/
		val json = """{"LaPartieEstPreteAJouer": {"pioche": [{"CarteNumerique": {"valeur": {"ZERO": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"ZERO": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"ZERO": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"ZERO": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"UN": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"DEUX": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"TROIS": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"QUATRE": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"CINQ": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"SIX": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"SEPT": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"HUIT": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Jaune": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Bleu": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Rouge": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Vert": {}}}}, {"CarteNumerique": {"valeur": {"NEUF": {}}, "couleur": {"Vert": {}}}}, {"Joker": {"couleur": {"Jaune": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Jaune": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Bleu": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Bleu": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Rouge": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Rouge": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Vert": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Vert": {}}, "jokerType": {"Plus2Cartes": {}}}}, {"Joker": {"couleur": {"Jaune": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Jaune": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Bleu": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Bleu": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Rouge": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Rouge": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Vert": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Vert": {}}, "jokerType": {"Passer": {}}}}, {"Joker": {"couleur": {"Jaune": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Jaune": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Bleu": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Bleu": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Rouge": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Rouge": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Vert": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Joker": {"couleur": {"Vert": {}}, "jokerType": {"ChangementDeSens": {}}}}, {"Plus4Cartes": {}}, {"Plus4Cartes": {}}, {"Plus4Cartes": {}}, {"Plus4Cartes": {}}, {"ChangementDeCouleur": {}}, {"ChangementDeCouleur": {}}, {"ChangementDeCouleur": {}}, {"ChangementDeCouleur": {}}], "joueurs": [{"nom": "Joueur 1", "uid": "98064f99-fc82-4634-86e3-28d048be3753", "main": [], "placement": 1}, {"nom": "Joueur 2", "uid": "98064f99-fc82-4634-86e3-28d048be3752", "main": [], "placement": 2}, {"nom": "Joueur 3", "uid": "98064f99-fc82-4634-86e3-28d048be3759", "main": [], "placement": 3}]}}"""

		val result = json.fromJson[UnoEvent]
		result match {
			case Right(_) => println(result)
			case Left(e) => fail(e)
		}
	}
}